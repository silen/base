
server{
    listen       80;
    server_name  gdws.k1.hiiyee.com gdws.k1.hiiyun.com;
    index index.html index.htm index.php;
    root  /data/www/task/s6__gdws;

    #limit_conn   crawler  20;

    location ~ .*\.svn
    {
      return 404;
    }

    location / {
    if (!-e $request_filename) {
        rewrite  ^(.*)$  /index.php?s=$1  last;
        break;
    }
   }

    location ~ .*\.(php|php5)
    {
      fastcgi_pass  unix:/tmp/php-cgi.sock;
      #fastcgi_pass  127.0.0.1:9001;
      fastcgi_index index.php;
      include fcgi.conf;
    }

    location ~ .*\.(gif|jpg|jpeg|png|bmp|swf)$
    {
      expires      30d;
    }

    location ~ .*\.(js|css)?$
    {
      expires      30d;
    }
   error_log  /data/logs/nginx/task/gdws.error.log  error;
    access_log  /data/logs/nginx/task/gdws.access.log  access;
}
~